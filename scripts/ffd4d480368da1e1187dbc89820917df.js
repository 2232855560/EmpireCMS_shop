(function(c){c.extend(c.nmTheme,{search_init:function(){this.$searchPanel.hasClass("nm-shop-search-ajax")&&this.shopSearchBind()},shopSearchBind:function(){var a=this,b,d,g,f;a.$searchInput=a.searchInHeader?c("#nm-shop-search-input, #nm-mobile-menu-shop-search-input"):c("#nm-shop-search-input");a.searchAjax=null;a.currentSearch="";a.$searchInput.keypress(function(e){b=c(this);d=b.val();g=e.keyCode?e.keyCode:e.which;"13"==g&&(e.preventDefault(),(f=a.shopSearchValidateInput(d))&&a.currentSearch!==d?b.hasClass("nm-mobile-menu-search")?(a.$pageOverlay.trigger("click"),setTimeout(function(){c("#nm-mobile-menu-shop-search-input").val("");a.shopSearch(d)},a.panelsAnimSpeed)):("0"!=nm_wp_vars.shopSearchAutoClose?a.$searchBtn.trigger("click"):a.$searchNotice.removeClass("show"),setTimeout(function(){a.shopSearch(d)},a.filterPanelSlideSpeed)):a.currentSearch=d)})},shopSearch:function(a){var b=this;b.$searchInput.blur();"popup"==b.shopSidebarLayout&&b.shopFiltersPopupHide();b.shopShowLoader();b.currentSearch=a;b.searchAjax=c.ajax({url:nm_wp_vars.searchUrl+encodeURIComponent(a),data:{shop_load:"search",post_type:"product",shop_filters_layout:b.shopSidebarLayout},dataType:"html",method:"GET",error:function(a,c,f){console.log("NM: AJAX error - shopSearch() - "+f);b.shopHideLoader();b.searchAjax=null},success:function(a){b.shopUpdateContent(a);b.searchAjax=null}})}});c.nmThemeExtensions.search=c.nmTheme.search_init})(jQuery);;(function(a){var m={init:function(){var e=!1,k;if(a.cookie){var d=a.cookie("nm-wishlist-items");if(d){var d=JSON.parse(d),g;for(g in d)d.hasOwnProperty(g)&&a("#nm-wishlist-item-"+g+"-button").addClass("added")}}a(document).on("click",".nm-wishlist-button",function(b){b.preventDefault();var c=a(this);b=c.data("product-id");if(e)if(c.hasClass("ajax-running"))e.abort(),e=!1;else return;c.addClass("ajax-running");k=c;var f=a(".nm-wishlist-item-"+b+"-button"),c=f.first().hasClass("added")?1:0;f.toggleClass("added");e=a.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:c,product_id:b},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},complete:function(){k.removeClass("ajax-running");e=!1},success:function(b){"1"===b.status?(f.attr("title",nm_wishlist_vars.wlButtonTitleRemove),a("body").trigger("wishlist_added_item")):(f.attr("title",nm_wishlist_vars.wlButtonTitleAdd),a("body").trigger("wishlist_removed_item"))}})});var h=a("#nm-wishlist-table");if(h.length){var l=function(b){b=b.closest("tr");var c=b.data("product-id");a.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:1,product_id:c},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},success:function(b){a("body").trigger("wishlist_removed_item")}});1==h.children("tbody").children("tr").not(".hiding").length&&(a("#nm-wishlist").css("display","none"),a("#nm-wishlist-empty").addClass("show"));b.addClass("hiding").fadeOut(300,function(){a(this).remove()})};h.find(".title .nm-wishlist-remove").bind("click",function(b){b.preventDefault();b=a(this);b.hasClass("clicked")||(b.addClass("clicked"),l(b))});a(document.body).on("added_to_cart",function(b,a,e,d){l(d)})}}};a(document).ready(function(){m.init()})})(jQuery);